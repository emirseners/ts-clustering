<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distance Metrics Guide - Time Series Clustering Package</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        .metric-category {
            background-color: #ecf0f1;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 5px solid #3498db;
        }
        .metric-item {
            background-color: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #bdc3c7;
        }
        .metric-name {
            font-weight: bold;
            color: #2980b9;
            font-size: 1.1em;
        }
        .metric-description {
            margin: 10px 0;
            color: #555;
        }
        .metric-usage {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .metric-parameters {
            background-color: #e8f4f8;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .parameter-name {
            font-weight: bold;
            color: #27ae60;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .code-example {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .code-example pre {
            margin: 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .comparison-table th {
            background-color: #3498db;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .comparison-table tr:hover {
            background-color: #e8f4f8;
        }
        .nav-tabs {
            display: flex;
            border-bottom: 2px solid #3498db;
            margin-bottom: 20px;
        }
        .nav-tab {
            padding: 10px 20px;
            background-color: #ecf0f1;
            border: none;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        .nav-tab.active {
            background-color: #3498db;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Distance Metrics Guide for Time Series Clustering</h1>
        
        <div class="info">
            <strong>Quick Start:</strong> This guide covers all available distance metrics in the time series clustering package. 
            Choose the metric that best fits your data characteristics and clustering goals.
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('pattern')">Pattern-Based</button>
            <button class="nav-tab" onclick="showTab('traditional')">Traditional Distances</button>
            <button class="nav-tab" onclick="showTab('advanced')">Advanced Usage</button>
            <button class="nav-tab" onclick="showTab('examples')">Examples</button>
        </div>

        <!-- Pattern-Based Distances Tab -->
        <div id="pattern" class="tab-content active">
            <h2>Pattern-Based Distance Metrics</h2>
            <p>These metrics analyze the behavioral patterns and trends in time series data rather than just numerical differences.</p>
            
            <div class="metric-category">
                <div class="metric-item">
                    <div class="metric-name">pattern</div>
                    <div class="metric-description">
                        Analyzes time series based on their behavioral characteristics using slope and curvature features. 
                        Splits time series into sections of different atomic behavior modes and compares these patterns.
                    </div>
                    <div class="metric-usage">distance='pattern'</div>
                    <div class="metric-parameters">
                        <strong>Parameters:</strong><br>
                        <span class="parameter-name">significanceLevel</span>: Threshold for filtering fluctuations (default: 0.01)<br>
                        <span class="parameter-name">sisterCount</span>: Number of sister vectors for length comparison (default: 50)<br>
                        <span class="parameter-name">wSlopeError</span>: Weight for slope dimension errors (default: 1)<br>
                        <span class="parameter-name">wCurvatureError</span>: Weight for curvature dimension errors (default: 1)
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">pattern_dtw</div>
                    <div class="metric-description">
                        Similar to 'pattern' but uses Dynamic Time Warping to handle temporal misalignments. 
                        Better for time series that may have similar patterns but different timing.
                    </div>
                    <div class="metric-usage">distance='pattern_dtw'</div>
                    <div class="metric-parameters">
                        <strong>Parameters:</strong><br>
                        <span class="parameter-name">significanceLevel</span>: Threshold for filtering fluctuations (default: 0.01)<br>
                        <span class="parameter-name">wSlopeError</span>: Weight for slope dimension errors (default: 1)<br>
                        <span class="parameter-name">wCurvatureError</span>: Weight for curvature dimension errors (default: 1)
                    </div>
                </div>
            </div>
        </div>

        <!-- Traditional Distances Tab -->
        <div id="traditional" class="tab-content">
            <h2>Traditional Distance Metrics (via SciPy)</h2>
            <p>These metrics are implemented using scipy.spatial.distance.pdist and provide standard numerical distance measures.</p>
            
            <div class="metric-category">
                <h3>Basic Distance Metrics</h3>
                
                <div class="metric-item">
                    <div class="metric-name">euclidean</div>
                    <div class="metric-description">Standard Euclidean distance (L2 norm) - measures straight-line distance between points.</div>
                    <div class="metric-usage">distance='euclidean'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">manhattan / cityblock</div>
                    <div class="metric-description">Manhattan distance (L1 norm) - measures distance along axes, good for grid-like data.</div>
                    <div class="metric-usage">distance='manhattan' or distance='cityblock'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">cosine</div>
                    <div class="metric-description">Cosine distance - measures angle between vectors, good for direction-based similarity.</div>
                    <div class="metric-usage">distance='cosine'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">correlation</div>
                    <div class="metric-description">Correlation distance - measures linear correlation between time series.</div>
                    <div class="metric-usage">distance='correlation'</div>
                </div>
            </div>

            <div class="metric-category">
                <h3>Advanced Distance Metrics</h3>
                
                <div class="metric-item">
                    <div class="metric-name">minkowski</div>
                    <div class="metric-description">Generalized Minkowski distance with configurable norm parameter p.</div>
                    <div class="metric-usage">distance='minkowski'</div>
                    <div class="metric-parameters">
                        <strong>Parameters:</strong><br>
                        <span class="parameter-name">p</span>: Norm parameter (default: 2, 1=Manhattan, 2=Euclidean, ∞=Chebyshev)
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">mahalanobis</div>
                    <div class="metric-description">Mahalanobis distance - accounts for correlations between variables.</div>
                    <div class="metric-usage">distance='mahalanobis'</div>
                    <div class="metric-parameters">
                        <strong>Parameters:</strong><br>
                        <span class="parameter-name">VI</span>: Inverse covariance matrix (auto-computed if not provided)
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">seuclidean</div>
                    <div class="metric-description">Standardized Euclidean distance - normalizes by variance.</div>
                    <div class="metric-usage">distance='seuclidean'</div>
                    <div class="metric-parameters">
                        <strong>Parameters:</strong><br>
                        <span class="parameter-name">V</span>: Variance vector (auto-computed if not provided)
                    </div>
                </div>
            </div>

            <div class="metric-category">
                <h3>Specialized Distance Metrics</h3>
                
                <div class="metric-item">
                    <div class="metric-name">chebyshev</div>
                    <div class="metric-description">Chebyshev distance (L∞ norm) - maximum difference along any dimension.</div>
                    <div class="metric-usage">distance='chebyshev'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">canberra</div>
                    <div class="metric-description">Canberra distance - weighted version of Manhattan distance.</div>
                    <div class="metric-usage">distance='canberra'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">braycurtis</div>
                    <div class="metric-description">Bray-Curtis distance - commonly used in ecology and biology.</div>
                    <div class="metric-usage">distance='braycurtis'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">hamming</div>
                    <div class="metric-description">Hamming distance - proportion of differing elements.</div>
                    <div class="metric-usage">distance='hamming'</div>
                </div>

                <div class="metric-item">
                    <div class="metric-name">jaccard</div>
                    <div class="metric-description">Jaccard distance - measures dissimilarity between sets.</div>
                    <div class="metric-usage">distance='jaccard'</div>
                </div>
            </div>
        </div>

        <!-- Advanced Usage Tab -->
        <div id="advanced" class="tab-content">
            <h2>Advanced Usage and Custom Metrics</h2>
            
            <div class="metric-category">
                <h3>Using the Generic 'scipy' Distance</h3>
                <p>For maximum flexibility, use the 'scipy' distance type with any supported metric and parameters:</p>
                
                <div class="code-example">
<pre># Custom Minkowski distance with p=3
results = cluster(data_set, distance='scipy', metric='minkowski', p=3)

# Mahalanobis distance with custom covariance
results = cluster(data_set, distance='scipy', metric='mahalanobis', VI=custom_VI)

# Standardized Euclidean with custom variance
results = cluster(data_set, distance='scipy', metric='seuclidean', V=custom_variance)</pre>
                </div>
            </div>

            <div class="metric-category">
                <h3>Parameter Passing</h3>
                <p>All additional parameters are passed through to the underlying distance functions:</p>
                
                <div class="code-example">
<pre># These are equivalent:
results = cluster(data_set, distance='minkowski', p=3)
results = cluster(data_set, distance='scipy', metric='minkowski', p=3)</pre>
                </div>
            </div>

            <div class="warning">
                <strong>Important Notes:</strong>
                <ul>
                    <li>All traditional distance metrics require time series of equal length</li>
                    <li>Pattern-based metrics can handle different lengths but may be computationally intensive</li>
                    <li>Some metrics (like Mahalanobis) may require specific data characteristics</li>
                    <li>For large datasets, consider using faster metrics like 'euclidean' or 'manhattan'
                </ul>
            </div>
        </div>

        <!-- Examples Tab -->
        <div id="examples" class="tab-content">
            <h2>Practical Examples</h2>
            
            <div class="metric-category">
                <h3>Basic Clustering Examples</h3>
                
                <div class="code-example">
<pre>from clusterer import cluster, import_data

# Load your data
data_set = import_data('your_data.xlsx')

# Pattern-based clustering (good for behavioral analysis)
results = cluster(data_set, distance='pattern', cValue=5, cMethod='maxclust')

# Traditional distance clustering (good for numerical similarity)
results = cluster(data_set, distance='euclidean', cValue=2.5, cMethod='inconsistent')

# Cosine distance (good for direction-based similarity)
results = cluster(data_set, distance='cosine', cValue=0.1, cMethod='distance')</pre>
                </div>
            </div>

            <div class="metric-category">
                <h3>Advanced Parameter Examples</h3>
                
                <div class="code-example">
<pre># Pattern distance with custom weights
results = cluster(data_set, distance='pattern', 
                 wSlopeError=2.0, wCurvatureError=1.5,
                 significanceLevel=0.005)

# Minkowski distance with custom norm
results = cluster(data_set, distance='minkowski', p=1.5)

# Custom scipy metric with parameters
results = cluster(data_set, distance='scipy', 
                 metric='canberra')</pre>
                </div>
            </div>

            <div class="metric-category">
                <h3>Metric Selection Guidelines</h3>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Data Characteristic</th>
                            <th>Recommended Metrics</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Similar patterns, different timing</td>
                            <td>pattern_dtw, dtw</td>
                            <td>Handles temporal misalignment</td>
                        </tr>
                        <tr>
                            <td>Behavioral similarity</td>
                            <td>pattern, pattern_dtw</td>
                            <td>Focuses on trends and behavior</td>
                        </tr>
                        <tr>
                            <td>Numerical similarity</td>
                            <td>euclidean, manhattan</td>
                            <td>Direct value comparison</td>
                        </tr>
                        <tr>
                            <td>Direction similarity</td>
                            <td>cosine, correlation</td>
                            <td>Angle-based similarity</td>
                        </tr>
                        <tr>
                            <td>High-dimensional data</td>
                            <td>mahalanobis, seuclidean</td>
                            <td>Accounts for correlations</td>
                        </tr>
                        <tr>
                            <td>Binary/categorical data</td>
                            <td>hamming, jaccard</td>
                            <td>Set-based similarity</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="info">
            <strong>Need Help?</strong> If you're unsure which distance metric to use, start with 'euclidean' for numerical data 
            or 'pattern' for behavioral analysis. The 'scipy' option gives you access to all available metrics with full parameter control.
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>
</html> 
